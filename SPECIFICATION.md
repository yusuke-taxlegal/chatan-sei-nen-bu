# 北谷町商工会青年部 部員情報共有システム 仕様書

## 1. プロジェクト概要

### 1.1 目的
北谷町商工会青年部の部員同士の交流とビジネスマッチングを促進するための情報共有システム。部員のプロフィール情報を共有し、相互理解を深め、新たな協業や受発注のきっかけを創出することを目指す。

### 1.2 解決する課題
- 部員の顔と名前が一致しない
- お互いの事業内容を知る機会が少ない
- 連携・協業のきっかけがない

### 1.3 目標
- 交流の活性化
- ビジネスマッチングの促進
- 青年部全体の魅力向上

## 2. 技術スタック

### 2.1 フロントエンド
- **フレームワーク**: Vue.js 3.4.29
- **ビルドツール**: Vite 5.3.1
- **ルーティング**: Vue Router 4.3.3
- **UIライブラリ**: 
  - @headlessui/vue 1.7.23
  - @heroicons/vue 2.2.0
- **アニメーション**: 
  - @vueuse/motion 3.0.3
  - aos 2.3.4
- **画像処理**: vue-advanced-cropper

### 2.2 バックエンド・インフラ
- **BaaS**: Firebase
  - Authentication (メール/パスワード、Google認証)
  - Firestore (データベース)
  - Storage (画像ストレージ)
  - Hosting (デプロイ先)

### 2.3 開発環境
- **Node.js**: v18以上推奨
- **パッケージマネージャー**: yarn
- **リンター**: ESLint
- **フォーマッター**: Prettier

## 3. 機能一覧

### 3.1 認証機能
- **ユーザー登録**
  - メールアドレス/パスワードでの登録
  - Googleアカウントでの登録
- **ログイン**
  - メールアドレス/パスワードでのログイン
  - Googleアカウントでのログイン
  - パスワードリセット機能
- **アカウント管理**
  - パスワード変更（メール/パスワード認証のみ）
  - メールアドレス変更（メール/パスワード認証のみ）
  - Googleアカウント連携（メール/パスワード認証のみ）
  - アカウント削除（プロフィール、画像、認証情報を完全削除）

### 3.2 プロフィール機能
- **プロフィール作成・編集**
  - 氏名・フリガナ
  - 会社名
  - 自己紹介・事業内容
  - プロフィール画像（アップロード・トリミング機能付き）
  - ウェブサイトURL
  - SNSリンク
  - YouTubeリンク（動画埋め込み対応）
  - どのようなニーズに対応できるか
  - 過去に青年部内で取引した事例
  - 提供できる情報
  - 求めている情報

### 3.3 部員一覧機能
- **部員一覧表示**
  - 全部員のプロフィールカード表示
  - ランダム表示（Fisher-Yatesシャッフル）
  - プロフィール画像、氏名、会社名、事業内容のプレビュー
  - カードクリックで詳細ページへ遷移

### 3.4 部員詳細機能
- **プロフィール詳細表示**
  - プロフィール画像（大サイズ）
  - 全てのプロフィール情報の表示
  - YouTube動画の埋め込み表示
  - SNSリンクの表示（プラットフォーム自動判別）
  - ウェブサイトリンク

### 3.5 その他機能
- **サンプルデータ管理**
  - サンプルデータの一括追加（約10人分）
  - サンプルデータの一括削除
  - コマンドラインから実行可能

## 4. ページ構成

### 4.1 ルート一覧

| パス | ページ名 | 認証要否 | 説明 |
|------|---------|---------|------|
| `/` | Home | 不要 | トップページ・システム紹介 |
| `/about` | ユーザー登録 | 不要 | 新規ユーザー登録ページ |
| `/login` | ログイン | 不要 | ログインページ |
| `/forgot-password` | パスワードリセット | 不要 | パスワードリセット申請 |
| `/mypage` | マイページ | 必要 | プロフィール編集・アカウント管理 |
| `/members` | 部員一覧 | 不要 | 全部員のプロフィール一覧 |
| `/member/:id` | 部員詳細 | 不要 | 個別部員のプロフィール詳細 |
| `/add-sample-data` | サンプルデータ管理 | 不要 | サンプルデータ追加・削除 |

### 4.2 ルートガード
- `/mypage` は認証が必要なページとして設定
- 未認証ユーザーがアクセスした場合、ログインページへリダイレクト

## 5. データ構造

### 5.1 Firestore コレクション: `profiles`

各ドキュメントIDはユーザーのFirebase Auth UIDと一致。

```javascript
{
  name: string,                    // 氏名
  phoneticName: string,            // フリガナ
  company: string,                // 会社名
  bio: string,                     // 自己紹介・事業内容
  profileImageUrl: string,         // プロフィール画像URL
  website: string,                // ウェブサイトURL
  sns: string,                     // SNSリンク
  youtube: string,                 // YouTubeリンク
  needs: string,                   // どのようなニーズに対応できるか
  pastTransactions: string,        // 過去に青年部内で取引した事例
  providableInfo: string,          // 提供できる情報
  seekingInfo: string              // 求めている情報
}
```

### 5.2 Firebase Storage: `profileImages/{userId}/{filename}`

プロフィール画像を保存。各ユーザーごとにディレクトリを分けて管理。

### 5.3 Firebase Authentication

- メール/パスワード認証
- Google認証
- 複数プロバイダーの連携対応

## 6. UI/UX特徴

### 6.1 デザイン
- モダンで洗練されたUI
- グラデーションを活用した視覚効果
- アニメーション（AOS、Vue Motion）による滑らかな遷移
- レスポンシブデザイン（モバイル・タブレット・デスクトップ対応）

### 6.2 ナビゲーション
- 固定ヘッダー（スティッキーヘッダー）
- ログイン状態に応じたメニュー切り替え
- モバイル用ハンバーガーメニュー

### 6.3 アクセシビリティ
- 印刷対応（印刷用スタイル最適化）
- フォントサイズの適切な設定
- カラーコントラストの配慮

## 7. 開発・運用手順

### 7.1 ローカル開発環境のセットアップ

```bash
# 依存関係のインストール
yarn install

# 開発サーバーの起動
yarn dev
```

開発サーバーは `http://localhost:5173/` で起動。

### 7.2 ビルド

```bash
# 本番用ビルド
yarn build
```

ビルド成果物は `dist/` ディレクトリに出力される。

### 7.3 デプロイ

```bash
# プロジェクトディレクトリから一つ上の階層に移動
cd ..

# Firebaseへデプロイ
firebase deploy --only hosting
```

### 7.4 サンプルデータの管理

```bash
# サンプルデータの追加
node add-sample-data.js add

# サンプルデータの削除
node add-sample-data.js delete
```

## 8. セキュリティ

### 8.1 認証
- Firebase Authenticationによる安全な認証
- パスワードは6文字以上
- 再認証による重要な操作の保護

### 8.2 データアクセス
- Firestoreのセキュリティルールによるアクセス制御（要確認）
- プロフィール情報は認証不要で閲覧可能
- プロフィール編集は本人のみ可能

### 8.3 ストレージ
- プロフィール画像は各ユーザーのディレクトリに保存
- アカウント削除時に画像も削除

## 9. 外部連携

### 9.1 AIアシスタント（GPTs）
- プロフィール作成支援のためのGPTsを提供
- リンク: https://chatgpt.com/g/g-686e38248dd08191ab49db04c0ac3c8d-qing-nian-bu-hurohuiruzuo-cheng-kun?model=gpt-4o

### 9.2 QRコード
- サイトへのアクセス用QRコードをホームページに表示
- QRコード生成サービス: https://api.qrserver.com/

## 10. 今後の拡張予定

- 検索・フィルタリング機能
- お気に入り機能
- メッセージング機能
- イベント管理機能
- 通知機能

## 11. ファイル構成

```
chatan-sei-nen-bu/
├── src/
│   ├── assets/          # スタイルシート
│   ├── components/      # 共通コンポーネント
│   ├── composables/     # 再利用可能なロジック（useAuth.js）
│   ├── router/          # ルーティング設定
│   ├── views/           # ページコンポーネント
│   ├── App.vue          # ルートコンポーネント
│   ├── firebase.js      # Firebase設定
│   └── main.js          # エントリーポイント
├── dist/                # ビルド成果物
├── add-sample-data.js   # サンプルデータ管理スクリプト
├── index.html           # HTMLテンプレート
├── vite.config.js       # Vite設定
├── firebase.json        # Firebase設定
├── package.json        # 依存関係
└── README.md           # 開発ガイド
```

## 12. 依存関係の詳細

### 12.1 主要依存関係
- `vue`: 3.4.29 - Vue.jsフレームワーク
- `vue-router`: 4.3.3 - ルーティング
- `firebase`: 10.12.2 - Firebase SDK
- `@headlessui/vue`: 1.7.23 - UIコンポーネント
- `@vueuse/motion`: 3.0.3 - アニメーション
- `aos`: 2.3.4 - スクロールアニメーション
- `vue3-lottie`: 3.3.1 - Lottieアニメーション

### 12.2 開発依存関係
- `vite`: 5.3.1 - ビルドツール
- `@vitejs/plugin-vue`: 5.0.5 - Vueプラグイン
- `eslint`: 8.57.0 - リンター
- `prettier`: 3.2.5 - フォーマッター

## 13. ブラウザ対応

- Chrome（最新版）
- Firefox（最新版）
- Safari（最新版）
- Edge（最新版）
- モバイルブラウザ（iOS Safari、Chrome Mobile）

## 14. パフォーマンス

- コード分割による遅延読み込み
- 画像の最適化
- レスポンシブ画像
- アニメーションの最適化

## 15. 注意事項

- 本番環境へのデプロイ前に必ず `yarn build` を実行
- サンプルデータの削除は `sample-user-` で始まるIDのみ
- Firebase設定情報は環境変数化を推奨（現状は直接記述）
- セキュリティルールの設定を確認・見直しが必要

